---
layout: post
title: 响应式实践(2)-间距自适应布局法
category: 多终端
---
#{{page.title}}

大家在平常的需求中, 肯定遇到过类似于下图所展示的列表:

<img src="/img/list.png" width="100%">

列表元素与元素之间的间距都是预先计算好的, 这种一列一列的布局方式的运用也体现在栅格系统中.
当设计师调整元素宽度,或增加元素时, 则需要重新计算间距并调整.

SO, 更好的方式是一切都让浏览器自动帮我们计算, 而这一切都可以办到, 本文将介绍这种方法.


##HTML
我们以最简单的DEMO开始, 这里仅关注列表区块部分, 头尾以及列表元素内的内容都先丢弃, 因此, 简化后的HTML如下:

```html
<div class="mod">
   <ul class="list">
       <li class="item"></li>
       <li class="item"></li>
       <li class="item"></li>
       <li class="item"></li>
       <li class="item"></li>
       <li class="item"></li>
   </ul>
</div>
```

##普通布局
普通布局中, 我们暂不考虑响应式, 一切都是定宽, 我们假设页面宽度为990px, 整个list宽度也如此, 每行6个li元素,
每个li宽度为150px, 则li之间的间距为 (990 - 150*6)/5 = 18px. 让li一行显示也有多种方法: float或者inline-block,
这里不再赘述, 可以见[DEMO](/demo/justify-margin/normal.html)

##间距自适应布局
大家对text-align: justify 这个属性应该不会太陌生吧? 这个属性经常用于将文字两端对齐,
适用于inline, inline-*的元素上, 而让浏览器自动计算间距的关键就在此, 对应的CSS代码如下:

```css
.list {
    font-size: 0;
    text-align: justify;
}

.list::after {
    content: "";
    display: inline-block;
    width: 100%;
}

.item {
    display: inline-block;
    font-size: 12px;
    text-align: left;
}
```

[点击看DEMO](/demo/justify-margin/jusify.html)


解释下上述代码的意义:

 * 1) 第一段代码对父容器.list设置属性text-align: justify; font-size: 0;
text-align部分不难理解, 仅仅是为了让list下的元素两端对齐. font-size:0 则是为了解决对元素设置
[inline-block导致的4px间隙](http://css-tricks.com/fighting-the-space-between-inline-block-elements/),
注意, 这里解决的4px间隙是伪元素和最后一个列表元素间的空格间隙.

 * 2) 第二段代码对父容器添加伪元素属性, 是为了让父容器的子元素呈现两行, 之所以这样做是因为,
在文字两端对齐的排版方案中, 最后一行的文字总是左对齐的, 可以想象, 最后一行的文字一般都是不会充满整行的,
如果也是两端对齐, 这个排版效果就....; 第一行也是最后一行,
因此我们通过伪元素添加一个空内容, 并设置宽度100%, 强制使其换行, 因此我们的列表元素得以获得两端对齐的效果.

 * CSS3有一个text-align-last的属性, 是用来设置最后一行文本的对齐方式, 和text-align的值一样, 本可以用这个方式解决
上面说到的末行左对齐的问题, 但是浏览器支持度不高, 我自己测试了一下, IE8+, FF支持, FF要加moz前缀.

 * 3) 第三段代码就比较容易理解了, 让列表元素以inline-block呈现, 同时重置font-size和text-align两个会继承的属性.

###兼容性解决方案

####IE8+

IE8+虽然是支持text-align-last属性(http://msdn.microsoft.com/en-us/library/ie/ms531163(v=vs.85).aspx),
不过支持得也有点问题: 设置font-size:0时, 该属性无效, 真是奇葩, 但是不设font-size为0,又会出现4px间隙.

***解决方案为: 设置[text-justify:distribute-all-lines](http://msdn.microsoft.com/en-us/library/ie/ms531172\(v=vs.85\).aspx)***

####IE6/7

 1. 自适应间距解决方案一样与IE8+一致, 但是要对父容器多设置zoom:1.
 2. inline-block兼容, 这个就比较容易又常见了: *display:inline; *zoom:1;

##兼容性代码

兼容所有浏览器的的自适应间距CSS代码如下:

```css
.list {
    font-size: 0;
    text-align: justify;

    /*for IE*/
    text-justify: distribute-all-lines;
    zoom:1;
}

.list::after {
    content: "";
    display: inline-block;
    width: 100%;
}

.item {
    display: inline-block;
    font-size: 12px;

    /*IE6 7*/
    *display: inline;
    zoom:1;
}
```

[点此进入DEMO](/demo/justify-margin/cross-browser-jusify.html)

##响应式适配
















